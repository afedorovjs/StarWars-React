{"version":3,"sources":["img/falcon.svg","actions/charactersActions.js","reducers/characters.js","actions/filmsActions.js","reducers/films.js","actions/searchActions.js","reducers/search.js","reducers/index.js","store/configureStore.js","Portal.js","ModalPreloader.jsx","Modal.jsx","Card.jsx","CardList.jsx","utils/makeDelay.js","App.jsx","index.jsx"],"names":["module","exports","GET_CHARACTERS_REQUEST","GET_CHARACTERS_SUCCESS","GET_CHARACTERS_FAIL","DELETE_CHARACTERS","BASE_PATH","SEARCH_PATH","PEOPLE_PATH","setCharacters","url","dispatch","getState","searchQuery","search","nextHref","characters","type","fetch","then","resp","json","payload","results","next","hasMoreItems","Boolean","getMoreCharacters","initialState","isFetching","error","GET_FILMS_SUCCESS","GET_FILMS_FAIL","BASE_FILMS_PATH","titlesArr","getFilms","forEach","title","push","films","CHANGE_SEARCH_TEXT","rootReducer","combineReducers","state","action","flat","store","createStore","applyMiddleware","thunk","Portal","el","document","createElement","body","appendChild","this","removeChild","ReactDOM","createPortal","props","children","Component","ModalPreloader","className","src","falcon","alt","Modal","fetchData","filmsUrls","titles","result","i","film","length","setState","needShowLoader","homeworld","res","name","species","setTimeout","avatar","current","style","backgroundColor","color","closeModal","styles","onClose","React","createRef","onClick","ref","birthYear","gender","map","key","connect","Card","appElement","firstLetter","useState","isOpen","setIsOpen","setColor","rgbColor","useEffect","colorArr","Math","floor","random","join","getColor","openModal","useCallback","classList","add","remove","searchDebounced","fn","delay","to","args","clearTimeout","makeDelay","setCharactersList","setSearch","setSearchText","needShowCard","placeholder","onChange","e","target","value","pageStart","loadMore","hasMore","birth_year","App","appRef","render","getElementById"],"mappings":"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","file":"static/js/main.7303e1e2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/falcon.5b35eabe.svg\";","/* eslint-disable import/prefer-default-export */\nexport const GET_CHARACTERS_REQUEST = 'GET_CHARACTERS_REQUEST';\nexport const GET_CHARACTERS_SUCCESS = 'GET_CHARACTERS_SUCCESS';\nexport const GET_CHARACTERS_FAIL = 'GET_CHARACTERS_FAIL';\nexport const DELETE_CHARACTERS = 'DELETE_CHARACTERS';\nconst BASE_PATH = 'https://swapi.co/api/';\nconst SEARCH_PATH = '?search=';\nconst PEOPLE_PATH = 'people/';\n\n\nfunction getMoreCharacters(url, dispatch) {\n  fetch(url).then((resp) => resp.json())\n    .then((resp) => {\n      dispatch({\n        type: GET_CHARACTERS_SUCCESS,\n        payload: {\n          characters: resp.results,\n          nextHref: resp.next || null,\n          hasMoreItems: Boolean(resp.next),\n        },\n      });\n    });\n}\n\nexport const deleteCharacters = () => (\n  {\n    type: DELETE_CHARACTERS,\n  }\n);\n\nexport function setCharacters() {\n  let url = (`${BASE_PATH}${PEOPLE_PATH}`);\n\n  return (dispatch, getState) => {\n    const { searchQuery } = getState().search;\n    const { nextHref } = getState().characters;\n\n    if (searchQuery) {\n      url = (`${BASE_PATH}${PEOPLE_PATH}${SEARCH_PATH}${searchQuery}`);\n    }\n\n    dispatch({\n      type: GET_CHARACTERS_REQUEST,\n    });\n\n    if (nextHref) {\n      url = nextHref;\n    }\n\n    getMoreCharacters(url, dispatch);\n  };\n}\n","/* eslint-disable import/prefer-default-export */\nimport {\n  GET_CHARACTERS_REQUEST,\n  GET_CHARACTERS_SUCCESS,\n  GET_CHARACTERS_FAIL,\n  DELETE_CHARACTERS,\n} from '../actions/charactersActions';\n\nconst initialState = {\n  characters: [],\n  isFetching: false,\n  hasMoreItems: true,\n  nextHref: null,\n  error: '',\n};\n\nexport function charactersReducer(state = initialState, action) {\n  switch (action.type) {\n    case GET_CHARACTERS_REQUEST:\n      return {\n        ...state,\n        isFetching: true,\n        error: '',\n      };\n\n    case GET_CHARACTERS_SUCCESS:\n      return {\n        ...state,\n        characters: [...state.characters, action.payload.characters].flat(),\n        nextHref: action.payload.nextHref,\n        hasMoreItems: action.payload.hasMoreItems,\n        isFetching: false,\n        error: '',\n      };\n\n    case DELETE_CHARACTERS:\n      return {\n        ...state,\n        characters: [],\n        nextHref: null,\n        hasMoreItems: true,\n        isFetching: true,\n      };\n\n    case GET_CHARACTERS_FAIL:\n      return {\n        ...state,\n        error: action.payload,\n        isFetching: false,\n      };\n\n    default:\n      return state;\n  }\n}\n","export const GET_FILMS_SUCCESS = 'GET_FILMS_SUCCESS';\nexport const GET_FILMS_FAIL = 'GET_FILMS_FAIL';\n\nconst BASE_FILMS_PATH = 'https://swapi.co/api/films/';\n\nconst titlesArr = [];\n\nfunction fetchFilms(url) {\n  fetch(url).then((resp) => resp.json())\n    .then((resp) => {\n      resp.results.forEach(({ title, url }) => {\n        titlesArr.push({ title, url });\n      });\n    });\n}\n\nexport function getFilms() {\n  fetchFilms(BASE_FILMS_PATH);\n\n  return (dispatch) => {\n    dispatch({\n      type: GET_FILMS_SUCCESS,\n      payload: {\n        films: titlesArr,\n      },\n    });\n  };\n}\n","/* eslint-disable import/prefer-default-export */\nimport {\n  GET_FILMS_SUCCESS,\n  GET_FILMS_FAIL,\n} from '../actions/filmsActions';\n\nconst initialState = {\n  films: [],\n};\n\nexport function filmsReducer(state = initialState, action) {\n  switch (action.type) {\n    case GET_FILMS_SUCCESS:\n      return {\n        ...state,\n        films: action.payload.films,\n      };\n\n    case GET_FILMS_FAIL:\n      return {\n        ...state,\n        error: action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n","/* eslint-disable import/prefer-default-export */\nexport const CHANGE_SEARCH_TEXT = 'CHANGE_SEARCH_TEXT';\n\nexport function setSearchText(searchQuery) {\n  return {\n    type: CHANGE_SEARCH_TEXT,\n    payload: {\n      searchQuery,\n    },\n  };\n}\n","/* eslint-disable import/prefer-default-export */\nimport { CHANGE_SEARCH_TEXT } from '../actions/searchActions';\n\nconst initialState = {\n  searchQuery: null,\n};\n\nexport function searchReducer(state = initialState, action) {\n  switch (action.type) {\n    case CHANGE_SEARCH_TEXT:\n      return {\n        ...state,\n        searchQuery: action.payload.searchQuery,\n      };\n\n    default:\n      return state;\n  }\n}\n","/* eslint-disable import/prefer-default-export */\nimport { combineReducers } from 'redux';\nimport { charactersReducer } from './characters';\nimport { filmsReducer } from './films';\nimport { searchReducer } from './search';\n\nexport const rootReducer = combineReducers({\n  films: filmsReducer,\n  characters: charactersReducer,\n  search: searchReducer,\n});\n","/* eslint-disable import/prefer-default-export */\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { rootReducer } from '../reducers';\n\nexport const store = createStore(rootReducer, applyMiddleware(thunk));\n","import { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nexport default class Portal extends Component {\n  \n  el = document.createElement('div');\n\n  componentDidMount() {\n    document.body.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.el);\n  }\n\n  render() {\n    return ReactDOM.createPortal(this.props.children, this.el);\n  }\n}","import React from 'react';\nimport falcon from './img/falcon.svg';\n\nimport './css/Preloader.css';\n\nexport default function ModalPreloader() {\n  return (\n    <div className=\"preloaderWrapper fadeIn\">\n      <img src={falcon} className=\"falconPreloader\" alt=\"falcon\" />\n    </div>\n  );\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Portal from './Portal';\nimport ModalPreloader from './ModalPreloader';\n\nimport './css/Modal.css';\n\nclass Modal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      needShowLoader: true,\n      homeworld: null,\n      species: null,\n      films: [],\n      styles: 'modalWrapper fadeIn',\n    }\n\n    this.avatar = React.createRef();\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  fetchData = () => {\n    const filmsUrls = this.props.films;\n    const titles = this.props.titles;\n    const result = [];\n    \n    for (let i = 0; i < titles.length; i++) {\n      filmsUrls.forEach((film) => {\n        if (film === titles[i].url) result.push(titles[i].title)\n      })\n    }\n\n    this.setState({\n      needShowLoader: true,\n      films: result,\n    })\n\n    if (this.props.homeworld !== null) {\n      fetch(this.props.homeworld)\n        .then(res => res.json())\n        .then(result => {\n          this.setState({\n            homeworld: result.name,\n          });\n        })\n\n      fetch(this.props.species)\n        .then(res => res.json())\n        .then(result => {\n          this.setState({\n            species: result.name,\n          });\n        })\n\n      setTimeout(() => {\n        this.setState({\n          needShowLoader: false,\n        });\n\n        this.avatar.current.style.backgroundColor = this.props.color;\n      }, 2000);\n    }\n  }\n\n  closeModal = () => {\n    this.setState({\n      styles: 'modalWrapper fadeOut'\n    });\n    setTimeout(() => this.props.onClose(), 300);\n  }\n\n  render() {\n    return (\n      <>\n        <Portal>\n        {this.state.needShowLoader ?\n          <ModalPreloader/> : (\n          <div className={this.state.styles}>\n            <div className=\"modalWindow\">\n              <button className=\"modalCloseBtn\" onClick={ this.closeModal }/>\n              <div className=\"modalHeader\">\n                <div ref={this.avatar} className=\"modalAvatar\">{ this.props.name[0] }</div>\n                <p>{ this.props.name }</p>\n              </div>\n              <div className=\"modalBody\">\n                <div className=\"threeWrapper\">\n                  <div className=\"titlesWrapper\">\n                    <span className=\"iconDOB\"/>\n                    <span className=\"titles\">Birth year</span>\n                    <span className=\"titleBirth\">{ this.props.birthYear }</span>\n                  </div>\n                  <div className=\"titlesWrapper\">\n                    <span className=\"iconSpecies\"/>\n                    <span className=\"titles\">Species</span>\n                    <span className=\"titleSpecies\">{ this.state.species }</span>\n                  </div>\n                  <div className=\"titlesWrapper\">\n                    <span className=\"iconGender\"/>\n                    <span className=\"titles\">Gender</span>\n                    <span className=\"titleGender\">{ this.props.gender }</span>\n                  </div>\n                </div>\n                <div className=\"filmsWrapper\">\n                  <div className=\"titlesWrapper\">\n                    <span className=\"iconHomeworld\"/>\n                    <span className=\"titles\">Homeworld</span>\n                    <span className=\"titleHomeworld\">{ this.state.homeworld }</span>\n                  </div>\n                  <div className=\"titlesWrapper\">\n                    <span className=\"iconFilms\"/>\n                    <span className=\"titleFilms\">Films</span>\n                    <div className=\"titleList\">{this.state.films.map((film, i) => (<span key={i}>{ film }</span>))}</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        </Portal>\n      </>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  let { films } = state.films;\n  return {\n    titles: films,\n  }\n}\n\nexport default connect(mapStateToProps)(Modal);\n","/* eslint-disable import/no-named-as-default-member */\n/* eslint-disable import/no-named-as-default */\n/* eslint-disable react/prop-types */\nimport React, { useCallback, useState, useEffect } from 'react';\nimport Modal from './Modal';\n\nfunction Card({ name, url, films, homeworld, species, gender, birthYear, appElement }) {\n  const firstLetter = name[0];\n  const [isOpen, setIsOpen] = useState(false);\n  const [color, setColor] = useState(null);\n  const avatar = React.createRef();\n  let rgbColor = null;\n\n  const getColor = () => {\n    const colorArr = [];\n    while (colorArr.length < 3) colorArr.push(Math.floor(Math.random() * 255));\n\n    rgbColor = 'rgb('+colorArr.join(', ')+')';\n    return rgbColor;\n  };\n\n  useEffect(() => {\n    avatar.current.style.backgroundColor = getColor();\n    setColor(rgbColor);\n  }, []);\n\n  const openModal = useCallback(() => {\n    setIsOpen(true);\n    appElement.current.classList.add('blur');\n    document.body.classList.add('scroll-hidden');\n  }, [setIsOpen, appElement]);\n\n  const closeModal = useCallback(() => {\n    setIsOpen(false);\n    appElement.current.classList.remove('blur');\n    document.body.classList.remove('scroll-hidden');\n    appElement.current.classList.add('blurOut');\n    setTimeout(() => appElement.current.classList.remove('blurOut'), 1000);\n  }, [setIsOpen, appElement]);\n\n  return (\n    <>\n      <li>\n        <div className=\"card fadeInUp\" onClick={openModal}>\n          <div className=\"avatarWrapper\">\n            <div ref={avatar} className=\"avatar\">{ firstLetter }</div>\n            <p className=\"avatarName\">{ name }</p>\n            <p className=\"avatarGender\">{ gender }</p>\n          </div>\n        </div>\n      </li>\n      {isOpen && (\n      <Modal\n        onClose={closeModal}\n        name={name}\n        films={films}\n        homeworld={homeworld}\n        species={species}\n        gender={gender}\n        birthYear={birthYear}\n        url={url}\n        color={color}\n      />\n      )}\n    </>\n  );\n}\n\nexport default Card;\n","/* eslint-disable react/prop-types */\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { setCharacters, deleteCharacters } from './actions/charactersActions';\nimport { setSearchText } from './actions/searchActions';\nimport { getFilms } from './actions/filmsActions';\nimport makeDelay from './utils/makeDelay';\nimport Card from './Card';\n\nfunction CardList({\n  characters, hasMoreItems, appElement, setSearch, setCharactersList, isFetching, getFilms,\n}) {\n  useEffect(() => {\n    getFilms();\n  }, [getFilms]);\n\n  const needShowCard = (\n    characters.length !== 0\n  );\n\n  const loadMore = () => {\n    if (!isFetching) {\n      setCharactersList();\n    }\n  };\n\n  return (\n    <>\n      <div className=\"form\">\n        <input\n          type=\"text\"\n          className=\"input\"\n          placeholder=\"Search by name\"\n          onChange={(e) => setSearch(e.target.value)}\n        />\n        <button type=\"submit\" className=\"searchButton\" />\n      </div>\n      <ul className=\"cardList\">\n        <InfiniteScroll\n          pageStart={0}\n          loadMore={loadMore}\n          hasMore={hasMoreItems}\n        >\n          {needShowCard\n            ? (characters.map(({ name, url, films, homeworld, species, gender, birth_year }) => (\n              <Card\n                name={name}\n                url={url}\n                key={name}\n                films={films}\n                homeworld={homeworld}\n                appElement={appElement}\n                species={species}\n                gender={gender}\n                birthYear={birth_year}\n              />\n            )))\n            : <div className=\"noCharactersFound fadeIn\">No characters found.</div>}\n        </InfiniteScroll>\n      </ul>\n    </>\n  );\n}\n\nconst mapStateToProps = (state) => {\n  let { hasMoreItems } = state.characters;\n  let { characters } = state.characters;\n  let { isFetching } = state.characters;\n  let { films } = state.films;\n  return {\n    characters,\n    hasMoreItems,\n    isFetching,\n    films,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  const searchDebounced = makeDelay(() => dispatch(setCharacters()), 1000);\n\n  return {\n    setCharactersList: () => {\n      dispatch(setCharacters());\n    },\n    setSearch: (searchQuery) => {\n      dispatch(deleteCharacters());\n      dispatch(setSearchText(searchQuery));\n      searchDebounced();\n    },\n    getFilms: () => {\n      dispatch(getFilms());\n    },\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(CardList);\n","export default function makeDelay(fn, delay) {\n  let to = 0;\n\n  return (...args) => {\n    if (to) clearTimeout(to);\n\n    to = setTimeout(() => fn(...args), delay);\n  };\n}\n","import React, { Component } from 'react';\nimport CardList from './CardList';\n\nimport './css/App.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.appRef = React.createRef();\n  }\n\n  render() {\n    return (\n      <div ref={this.appRef} className=\"app\">\n        <header className=\"header\">\n          <div className=\"logoWrapper\">\n            <div className=\"logoStar\" />\n            <p className=\"logoText\">CHARACTER ENCYCLOPEDIA</p>\n            <div className=\"logoWars\" />\n          </div>\n        </header>\n\n        <main className=\"cardContainer\">\n          <CardList\n            appElement={this.appRef}\n          />\n        </main>\n\n        <footer className=\"footer\">\n          <div className=\"footerText\">\n            <p className=\"footerText\">STAR WARS CHARACTER ENCYCLOPEDIA, 2019</p>\n          </div>\n        </footer>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { store } from './store/configureStore';\nimport App from './App';\n\nimport './css/reset.css';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}
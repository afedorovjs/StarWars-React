(this["webpackJsonpstarwars-react"]=this["webpackJsonpstarwars-react"]||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/falcon.5b35eabe.svg"},22:function(e,t,a){e.exports=a(37)},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(4),s=a.n(c),l=a(9),o=a(3),i=a(18),u=a(21),m=a(5),p="GET_CHARACTERS_REQUEST",f="GET_CHARACTERS_SUCCESS",h="GET_CHARACTERS_FAIL",d="DELETE_CHARACTERS",E="https://swapi.dev/api/",v="?search=",b="people/";function y(){var e="".concat(E).concat(b);return function(t,a){var r=a().search.searchQuery,n=a().characters.nextHref;r&&(e="".concat(E).concat(b).concat(v).concat(r)),t({type:p}),n&&(e=n),function(e,t){fetch(e).then((function(e){return e.json()})).then((function(e){t({type:f,payload:{characters:e.results,nextHref:e.next||null,hasMoreItems:Boolean(e.next)}})}))}(e,t)}}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={characters:[],isFetching:!1,hasMoreItems:!0,nextHref:null,error:""};var N="GET_FILMS_SUCCESS",w="GET_FILMS_FAIL",C="https://swapi.dev/api/films/",S=[];function R(){return fetch(C).then((function(e){return e.json()})).then((function(e){e.results.forEach((function(e){var t=e.title,a=e.url;S.push({title:t,url:a})}))})),function(e){e({type:N,payload:{films:S}})}}function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A={films:[]};var L="CHANGE_SEARCH_TEXT";function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var F={searchQuery:null};var k=Object(o.c)({films:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return T({},e,{films:t.payload.films});case w:return T({},e,{error:t.payload});default:return e}},characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return j({},e,{isFetching:!0,error:""});case f:return j({},e,{characters:[].concat(Object(u.a)(e.characters),[t.payload.characters]).flat(),nextHref:t.payload.nextHref,hasMoreItems:t.payload.hasMoreItems,isFetching:!1,error:""});case d:return j({},e,{characters:[],nextHref:null,hasMoreItems:!0,isFetching:!0});case h:return j({},e,{error:t.payload,isFetching:!1});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{searchQuery:t.payload.searchQuery});default:return e}}}),I=Object(o.d)(k,Object(o.a)(i.a)),H=a(6),M=a(7),W=a(10),x=a(8),_=a(11),G=a(19),B=a.n(G);var Q=a(15),Y=function(e){function t(){var e,a;Object(H.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(W.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(n)))).el=document.createElement("div"),a}return Object(_.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"render",value:function(){return s.a.createPortal(this.props.children,this.el)}}]),t}(r.Component),U=a(20),J=a.n(U);a(33);function X(){return n.a.createElement("div",{className:"preloaderWrapper fadeIn"},n.a.createElement("img",{src:J.a,className:"falconPreloader",alt:"falcon"}))}a(34);var q=function(e){function t(e){var a;return Object(H.a)(this,t),(a=Object(W.a)(this,Object(x.a)(t).call(this,e))).fetchData=function(){for(var e=a.props.films,t=a.props.titles,r=[],n=function(a){e.forEach((function(e){e===t[a].url&&r.push(t[a].title)}))},c=0;c<t.length;c++)n(c);a.setState({needShowLoader:!0,films:r}),a.props.homeworld&&a.props.species&&(fetch(a.props.homeworld).then((function(e){return e.json()})).then((function(e){a.setState({homeworld:e.name})})),fetch(a.props.species).then((function(e){return e.json()})).then((function(e){a.setState({species:e.name})}))),setTimeout((function(){a.setState({needShowLoader:!1}),a.avatarRef.current.style.backgroundColor=a.props.color}),2e3)},a.closeModal=function(){a.setState({styles:"modalWrapper fadeOut"}),setTimeout((function(){return a.props.onClose()}),300)},a.state={needShowLoader:!0,homeworld:null,species:null,films:[],styles:"modalWrapper fadeIn"},a.avatarRef=n.a.createRef(),a}return Object(_.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){return n.a.createElement(Y,null,this.state.needShowLoader?n.a.createElement(X,null):n.a.createElement("div",{className:this.state.styles},n.a.createElement("div",{className:"modalWindow"},n.a.createElement("button",{className:"modalCloseBtn",onClick:this.closeModal}),n.a.createElement("div",{className:"modalHeader"},n.a.createElement("div",{ref:this.avatarRef,className:"modalAvatar"},this.props.name[0]),n.a.createElement("p",null,this.props.name)),n.a.createElement("div",{className:"modalBody"},n.a.createElement("div",{className:"threeWrapper"},n.a.createElement("div",{className:"titlesWrapper"},n.a.createElement("span",{className:"iconDOB"}),n.a.createElement("span",{className:"titles"},"Birth year"),n.a.createElement("span",{className:"titleBirth"},this.props.birthYear)),n.a.createElement("div",{className:"titlesWrapper"},n.a.createElement("span",{className:"iconSpecies"}),n.a.createElement("span",{className:"titles"},"Species"),n.a.createElement("span",{className:"titleSpecies"},this.state.species)),n.a.createElement("div",{className:"titlesWrapper"},n.a.createElement("span",{className:"iconGender"}),n.a.createElement("span",{className:"titles"},"Gender"),n.a.createElement("span",{className:"titleGender"},this.props.gender))),n.a.createElement("div",{className:"filmsWrapper"},n.a.createElement("div",{className:"titlesWrapper"},n.a.createElement("span",{className:"iconHomeworld"}),n.a.createElement("span",{className:"titles"},"Homeworld"),n.a.createElement("span",{className:"titleHomeworld"},this.state.homeworld)),n.a.createElement("div",{className:"titlesWrapper"},n.a.createElement("span",{className:"iconFilms"}),n.a.createElement("span",{className:"titleFilms"},"Films"),n.a.createElement("div",{className:"titleList"},this.state.films.map((function(e,t){return n.a.createElement("span",{key:t},e)})))))))))}}]),t}(r.Component),z=Object(l.b)((function(e){return{titles:e.films.films}}))(q);var K=function(e){var t=e.name,a=e.url,c=e.films,s=e.homeworld,l=e.species,o=e.gender,i=e.birthYear,u=e.appRef,m=Object(r.useState)(!1),p=Object(Q.a)(m,2),f=p[0],h=p[1],d=Object(r.useState)(null),E=Object(Q.a)(d,2),v=E[0],b=E[1],y=t[0],O=n.a.createRef(),j=null;Object(r.useEffect)((function(){O.current.style.backgroundColor=function(){for(var e=[];e.length<3;)e.push(Math.floor(255*Math.random()));return j="rgb("+e.join(", ")+")"}(),b(j)}),[]);var g=Object(r.useCallback)((function(){h(!0),u.current.classList.add("blur"),document.body.classList.add("scroll-hidden")}),[h,u]),N=Object(r.useCallback)((function(){h(!1),u.current.classList.remove("blur"),document.body.classList.remove("scroll-hidden"),u.current.classList.add("blurOut"),setTimeout((function(){return u.current.classList.remove("blurOut")}),1e3)}),[h,u]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("li",null,n.a.createElement("div",{className:"card fadeInUp",onClick:g},n.a.createElement("div",{className:"avatarWrapper"},n.a.createElement("div",{ref:O,className:"avatar"},y),n.a.createElement("p",{className:"avatarName"},t),n.a.createElement("p",{className:"avatarGender"},o)))),f&&n.a.createElement(z,{onClose:N,name:t,films:c,homeworld:s,species:l,gender:o,birthYear:i,url:a,color:v}))},V=Object(l.b)((function(e){var t=e.characters,a=t.hasMoreItems;return{characters:t.characters,hasMoreItems:a,isFetching:t.isFetching,films:e.films.films}}),(function(e){var t=function(e,t){var a=0;return function(){for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];a&&clearTimeout(a),a=setTimeout((function(){return e.apply(void 0,n)}),t)}}((function(){return e(y())}),1e3);return{setCharactersList:function(){e(y())},setSearch:function(a){e({type:d}),e(function(e){return{type:L,payload:{searchQuery:e}}}(a)),t()},getFilms:function(){e(R())}}}))((function(e){var t=e.characters,a=e.hasMoreItems,c=e.appRef,s=e.setSearch,l=e.setCharactersList,o=e.isFetching,i=e.getFilms;Object(r.useEffect)((function(){return i()}),[i]);var u=0!==t.length;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form"},n.a.createElement("input",{type:"text",className:"input",placeholder:"Search by name",onChange:function(e){return s(e.target.value)}}),n.a.createElement("button",{type:"submit",className:"searchButton"})),n.a.createElement("ul",{className:"cardList"},n.a.createElement(B.a,{pageStart:0,loadMore:function(){o||l()},hasMore:a,scrollThreshold:"100px"},u?t.map((function(e){var t=e.name,a=e.url,r=e.films,s=e.homeworld,l=e.species,o=e.gender,i=e.birth_year;return n.a.createElement(K,{name:t,url:a,key:t,films:r,homeworld:s,appRef:c,species:l,gender:o,birthYear:i})})):n.a.createElement("div",{className:"noCharactersFound fadeIn"},"No characters found."))))})),Z=(a(35),function(e){function t(e){var a;return Object(H.a)(this,t),(a=Object(W.a)(this,Object(x.a)(t).call(this,e))).appRef=n.a.createRef(),a}return Object(_.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{ref:this.appRef,className:"app"},n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"logoWrapper"},n.a.createElement("div",{className:"logoStar"}),n.a.createElement("p",{className:"logoText"},"CHARACTER ENCYCLOPEDIA"),n.a.createElement("div",{className:"logoWars"}))),n.a.createElement("main",{className:"cardContainer"},n.a.createElement(V,{appRef:this.appRef})),n.a.createElement("footer",{className:"footer"},n.a.createElement("div",{className:"footerText"},n.a.createElement("p",{className:"footerText"},"STAR WARS CHARACTER ENCYCLOPEDIA, 2019"))))}}]),t}(r.Component));a(36);s.a.render(n.a.createElement(l.a,{store:I},n.a.createElement(Z,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.50dfc83c.chunk.js.map
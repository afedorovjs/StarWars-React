{"version":3,"sources":["img/falcon.svg","Portal.js","ModalStarWarsPreloader.jsx","Modal.js","Card.jsx","CardList.jsx","StarWarsPreloader.jsx","App.js","index.js"],"names":["module","exports","Portal","el","document","createElement","body","appendChild","this","removeChild","ReactDOM","createPortal","props","children","Component","ModalStarWarsPreloader","className","src","falcon","alt","Modal","fetchData","data","filmsArray","fetch","homeworld","then","res","json","result","setState","name","species","films","forEach","film","resp","push","title","setTimeout","isLoading","state","fetchResponse","onClose","isOpen","styles","closeModal","bind","onClick","birth_year","gender","map","url","Card","firstLetter","useState","setIsOpen","setFetchResponse","openModal","useCallback","needRenderModal","CardList","results","searchQuery","handleSubmit","handleChange","loadItems","hasMore","method","onSubmit","type","value","placeholder","onChange","pageStart","loadMore","key","StarWarsPreloader","BASE_PATH","SEARCH_PATH","PEOPLE_PATH","App","nextHref","hasMoreItems","person","next","event","preventDefault","target","fetchDataApp","render","getElementById"],"mappings":"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","file":"static/js/main.2ce02a68.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/falcon.5b35eabe.svg\";","import { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nexport default class Portal extends Component {\n  \n  el = document.createElement('div');\n\n  componentDidMount() {\n    document.body.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.el);\n  }\n\n  render() {\n    return ReactDOM.createPortal(this.props.children, this.el);\n  }\n}","import React from 'react';\nimport './StarWarsPreloader.css';\nimport falcon from './img/falcon.svg';\n\nexport default function ModalStarWarsPreloader() {\n  return (\n    <div className=\"preloaderWrapper fadeIn\">\n      <img src={falcon} className=\"lds-ring\" alt=\"falcon\" />\n    </div>\n  );\n}\n","import React, { Component } from 'react';\nimport Portal from './Portal';\nimport ModalStarWarsPreloader from './ModalStarWarsPreloader';\nimport './Modal.css';\n\n\n\nclass Modal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: props.fetchResponse,\n      onClose: props.onClose,\n      isLoading: true,\n      homeworld: null,\n      species: null,\n      films: null,\n      isOpen: props.isOpen,\n      styles: 'modalWrapper',\n    }\n    \n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  componentDidMount() {\n    const { data } = this.state;\n    this.fetchData(data);\n  }\n\n  fetchData = (data) => {\n    const filmsArray = [];\n\n    fetch(data.homeworld)\n      .then(res => res.json())\n      .then(result => {\n        this.setState({\n          homeworld: result.name,\n        });\n      })\n      .then(\n        fetch(data.species)\n        .then(res => res.json())\n        .then(result => {\n          this.setState({\n            species: result.name,\n          });\n        })\n      )\n\n      data.films.forEach((film) => {\n          fetch(film)\n            .then(result => result.json())\n            .then((resp) => {\n                filmsArray.push(resp.title);\n              }\n            )\n        }\n      );\n\n      this.setState({\n        films: filmsArray,\n      });\n\n      setTimeout(() => {\n        this.setState({isLoading: false})\n      }, 2000);\n  }\n\n  closeModal() {\n    this.setState({\n      styles: 'modalWrapper fadeOut'\n    })\n    setTimeout(() => this.state.onClose(), 1500);\n  }\n  \n  render() {\n    return (\n      <>\n        <Portal>\n        {this.state.isLoading ?\n          <ModalStarWarsPreloader/> : (\n          <div className={this.state.styles}>\n            <div className=\"modalWindow\">\n              <button className=\"modalCloseBtn\" onClick={ this.closeModal }/>\n              <div className=\"modalHeader\">\n                <div className=\"modalAvatar\">{ this.state.data.name[0] }</div>\n                <p>{ this.state.data.name }</p>\n              </div>\n              <div className=\"modalBody\">\n                <div className=\"threeWrapper\">\n                  <div className=\"titlesWrapper\">\n                    <span className=\"iconDOB\"/>\n                    <span className=\"titles\">Birth year</span>\n                    <span className=\"titleBirth\">{ this.state.data.birth_year }</span>\n                  </div>\n                  <div className=\"titlesWrapper\">\n                    <span className=\"iconSpecies\"/>\n                    <span className=\"titles\">Species</span>\n                    <span className=\"titleSpecies\">{ this.state.species }</span>\n                  </div>\n                  <div className=\"titlesWrapper\">\n                    <span className=\"iconGender\"/>\n                    <span className=\"titles\">Gender</span>\n                    <span className=\"titleGender\">{ this.state.data.gender }</span>\n                  </div>\n                </div>\n                <div className=\"filmsWrapper\">\n                  <div className=\"titlesWrapper\">\n                    <span className=\"iconHomeworld\"/>\n                    <span className=\"titles\">Homeworld</span>\n                    <span className=\"titleHomeworld\">{ this.state.homeworld }</span>\n                  </div>\n                  <div className=\"titlesWrapper\">\n                    <span className=\"iconFilms\"/>\n                    <span className=\"titleFilms\">Films</span>\n                    <div className=\"titleList\">{this.state.films.map((film) => {return <span>{ film }</span>})}</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        </Portal>\n      </>\n    )\n  }\n}\n\nexport default Modal;\n","/* eslint-disable import/no-named-as-default-member */\n/* eslint-disable import/no-named-as-default */\n/* eslint-disable react/prop-types */\nimport React, { useCallback, useState } from 'react';\nimport Modal from './Modal';\n\nfunction fetchData(url) {\n  return fetch(url).then((result) => result.json());\n}\n\nfunction Card({ name, url }) {\n  const firstLetter = name[0];\n  const [isOpen, setIsOpen] = useState(false);\n  const [fetchResponse, setFetchResponse] = useState(null);\n\n  const openModal = useCallback(() => {\n    setIsOpen(true);\n    if (fetchResponse === null) {\n      fetchData(url).then(\n        (resp) => {\n          setFetchResponse(resp);\n        },\n      );\n    }\n  }, [setFetchResponse, fetchResponse, url]);\n\n  const closeModal = useCallback(() => {\n    setIsOpen(false);\n  }, [setIsOpen]);\n\n  const needRenderModal = (\n    (fetchResponse !== null) && isOpen\n  );\n  return (\n    <>\n      <li>\n        <div className=\"card fadeIn\" onClick={openModal}>\n          <div className=\"avatarWrapper\">\n            <div className=\"avatar\">{ firstLetter }</div>\n            <p className=\"avatarName\">{ name }</p>\n            <p className=\"avatarSpecies\">Species</p>\n          </div>\n        </div>\n      </li>\n      {needRenderModal && (\n        <Modal\n          fetchResponse={fetchResponse}\n          onClose={closeModal}\n          fetchData={fetchData}\n          isOpen={isOpen}\n        />\n      )}\n    </>\n  );\n}\n\nexport default Card;\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport InfiniteScroll from 'react-infinite-scroller';\n// import StarWarsPreloader from './StarWarsPreloader';\nimport Card from './Card';\n\nfunction CardList({\n  results, searchQuery, handleSubmit, handleChange, loadItems, hasMore,\n}) {\n  // const loader = <StarWarsPreloader />;\n\n  return (\n    <>\n      <form\n        method=\"GET\"\n        className=\"form\"\n        onSubmit={handleSubmit}\n      >\n        <input\n          type=\"text\"\n          value={searchQuery}\n          className=\"input\"\n          placeholder=\"Search by name\"\n          onChange={handleChange}\n        />\n        <button type=\"submit\" className=\"searchButton\" />\n      </form>\n      <ul className=\"cardList\">\n        <InfiniteScroll\n          pageStart={0}\n          loadMore={loadItems}\n          hasMore={hasMore}\n        >\n          {results.map(({ name, url }) => (\n            <Card\n              name={name}\n              url={url}\n              key={name}\n            />\n          ))}\n        </InfiniteScroll>\n      </ul>\n    </>\n  );\n}\n\nexport default CardList;\n","import React from 'react';\nimport './StarWarsPreloader.css';\nimport falcon from './img/falcon.svg';\n\nexport default function StarWarsPreloader() {\n  return (\n    <div className=\"preloader fadeIn\">\n      <img src={falcon} className=\"lds-ring\" alt=\"fireSpot\" />\n    </div>\n  );\n}\n","import React, { Component } from 'react';\nimport CardList from './CardList';\nimport StarWarsPreloader from './StarWarsPreloader';\n\nimport './reset.css';\nimport './App.css';\n\nconst BASE_PATH = 'https://swapi.co/api/';\nconst SEARCH_PATH = '?search=';\nconst PEOPLE_PATH = 'people/'\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchQuery: '',\n      result: {},\n      results: [],\n      isLoading: true,\n      nextHref: null,\n      hasMoreItems: true,\n    };\n  }\n\n  componentDidMount() {\n    this.loadItems();\n    \n    setTimeout(() => {\n      this.setState({\n        isLoading: false,\n      })\n    }, 2000);\n  }\n\n  loadItems = (nextHref) => {\n    let url = (`${BASE_PATH}${PEOPLE_PATH}`);\n\n    if(this.state.nextHref) {\n      url = this.state.nextHref;\n    }\n\n    if(nextHref === null) {\n      url = (`${BASE_PATH}${PEOPLE_PATH}${SEARCH_PATH}${this.state.searchQuery}`)\n\n      this.setState({\n        nextHref: nextHref,\n        hasMoreItems: true,\n      })\n    }\n\n    fetch(url).then(res => res.json())\n      .then((resp) => {\n          const results = this.state.results;\n\n          resp.results.map((person) => {\n            results.push(person);\n          });\n\n          if(resp.next) {\n            this.setState({\n              results: results,\n              nextHref: resp.next,\n            });\n          } else {\n            this.setState({\n              hasMoreItems: false,\n            });\n          }\n        }\n    );\n\n    setTimeout(() => {\n      this.setState({\n        isLoading: false,\n      })\n    }, 2000);\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const nextHref = null;\n\n    this.setState({\n      isLoading: true,\n      results: [],\n    });\n    this.loadItems(nextHref);\n  }\n\n  handleChange = (event) => {\n    this.setState({searchQuery: event.target.value})\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <header className=\"header\">\n          <div className=\"logoWrapper\">\n            <div className=\"logoStar\"></div>\n            <p className=\"logoText\">CHARACTER ENCYCLOPEDIA</p>\n            <div className=\"logoWars\"></div>\n          </div>\n        </header>\n\n        <main className=\"cardContainer\"> \n          {this.state.isLoading ?\n          <StarWarsPreloader/> : <CardList\n            results={this.state.results}\n            searchQuery={this.state.searchQuery}\n            handleSubmit={this.handleSubmit}\n            handleChange={this.handleChange}\n            fetchDataApp={this.fetchData}\n            loadItems={this.loadItems}\n            hasMore={this.state.hasMoreItems}\n          />}\n        </main>\n        \n        <footer className=\"footer\">\n          <div className=\"footerText\">\n            <p className=\"footerText\">STAR WARS CHARACTER ENCYCLOPEDIA, 2019</p>\n          </div>\n        </footer>\n      </div>\n    );\n  };\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}
(this["webpackJsonpstarwars-react"]=this["webpackJsonpstarwars-react"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/falcon.5b35eabe.svg"},,,function(e,t,a){},,function(e,t,a){e.exports=a(25)},,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(6),c=a.n(l),r=a(1),i=a(2),o=a(4),m=a(3),u=a(5),d=a(12),h=a.n(d),p=a(9),f=a(7),E=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).el=document.createElement("div"),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"render",value:function(){return c.a.createPortal(this.props.children,this.el)}}]),t}(n.Component),v=(a(11),a(8)),N=a.n(v);function b(){return s.a.createElement("div",{className:"preloaderWrapper fadeIn"},s.a.createElement("img",{src:N.a,className:"lds-ring",alt:"falcon"}))}a(22);var g=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).fetchData=function(e){var t=[];fetch(e.homeworld).then((function(e){return e.json()})).then((function(e){a.setState({homeworld:e.name})})).then(fetch(e.species).then((function(e){return e.json()})).then((function(e){a.setState({species:e.name})}))),e.films.forEach((function(e){fetch(e).then((function(e){return e.json()})).then((function(e){t.push(e.title)}))})),a.setState({films:t}),setTimeout((function(){a.setState({isLoading:!1})}),2e3)},a.state={data:e.fetchResponse,onClose:e.onClose,isLoading:!0,homeworld:null,species:null,films:null,isOpen:e.isOpen,styles:"modalWrapper"},a.closeModal=a.closeModal.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.data;this.fetchData(e)}},{key:"closeModal",value:function(){var e=this;this.setState({styles:"modalWrapper fadeOut"}),setTimeout((function(){return e.state.onClose()}),1500)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(E,null,this.state.isLoading?s.a.createElement(b,null):s.a.createElement("div",{className:this.state.styles},s.a.createElement("div",{className:"modalWindow"},s.a.createElement("button",{className:"modalCloseBtn",onClick:this.closeModal}),s.a.createElement("div",{className:"modalHeader"},s.a.createElement("div",{className:"modalAvatar"},this.state.data.name[0]),s.a.createElement("p",null,this.state.data.name)),s.a.createElement("div",{className:"modalBody"},s.a.createElement("div",{className:"threeWrapper"},s.a.createElement("div",{className:"titlesWrapper"},s.a.createElement("span",{className:"iconDOB"}),s.a.createElement("span",{className:"titles"},"Birth year"),s.a.createElement("span",{className:"titleBirth"},this.state.data.birth_year)),s.a.createElement("div",{className:"titlesWrapper"},s.a.createElement("span",{className:"iconSpecies"}),s.a.createElement("span",{className:"titles"},"Species"),s.a.createElement("span",{className:"titleSpecies"},this.state.species)),s.a.createElement("div",{className:"titlesWrapper"},s.a.createElement("span",{className:"iconGender"}),s.a.createElement("span",{className:"titles"},"Gender"),s.a.createElement("span",{className:"titleGender"},this.state.data.gender))),s.a.createElement("div",{className:"filmsWrapper"},s.a.createElement("div",{className:"titlesWrapper"},s.a.createElement("span",{className:"iconHomeworld"}),s.a.createElement("span",{className:"titles"},"Homeworld"),s.a.createElement("span",{className:"titleHomeworld"},this.state.homeworld)),s.a.createElement("div",{className:"titlesWrapper"},s.a.createElement("span",{className:"iconFilms"}),s.a.createElement("span",{className:"titleFilms"},"Films"),s.a.createElement("div",{className:"titleList"},this.state.films.map((function(e){return s.a.createElement("span",null,e)}))))))))))}}]),t}(n.Component);function S(e){return fetch(e).then((function(e){return e.json()}))}var y=function(e){var t=e.name,a=e.url,l=t[0],c=Object(n.useState)(!1),r=Object(p.a)(c,2),i=r[0],o=r[1],m=Object(n.useState)(null),u=Object(p.a)(m,2),d=u[0],h=u[1],f=Object(n.useCallback)((function(){o(!0),null===d&&S(a).then((function(e){h(e)}))}),[h,d,a]),E=Object(n.useCallback)((function(){o(!1)}),[o]),v=null!==d&&i;return s.a.createElement(s.a.Fragment,null,s.a.createElement("li",null,s.a.createElement("div",{className:"card fadeIn",onClick:f},s.a.createElement("div",{className:"avatarWrapper"},s.a.createElement("div",{className:"avatar"},l),s.a.createElement("p",{className:"avatarName"},t),s.a.createElement("p",{className:"avatarSpecies"},"Species")))),v&&s.a.createElement(g,{fetchResponse:d,onClose:E,fetchData:S,isOpen:i}))};var O=function(e){var t=e.results,a=e.searchQuery,n=e.handleSubmit,l=e.handleChange,c=e.loadItems,r=e.hasMore;return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{method:"GET",className:"form",onSubmit:n},s.a.createElement("input",{type:"text",value:a,className:"input",placeholder:"Search by name",onChange:l}),s.a.createElement("button",{type:"submit",className:"searchButton"})),s.a.createElement("ul",{className:"cardList"},s.a.createElement(h.a,{pageStart:0,loadMore:c,hasMore:r},t.map((function(e){var t=e.name,a=e.url;return s.a.createElement(y,{name:t,url:a,key:t})})))))};function C(){return s.a.createElement("div",{className:"preloader fadeIn"},s.a.createElement("img",{src:N.a,className:"lds-ring",alt:"fireSpot"}))}a(23),a(24);var j="https://swapi.co/api/",I="?search=",W="people/",k=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).loadItems=function(e){var t="".concat(j).concat(W);a.state.nextHref&&(t=a.state.nextHref),null===e&&(t="".concat(j).concat(W).concat(I).concat(a.state.searchQuery),a.setState({nextHref:e,hasMoreItems:!0})),fetch(t).then((function(e){return e.json()})).then((function(e){var t=a.state.results;e.results.map((function(e){t.push(e)})),e.next?a.setState({results:t,nextHref:e.next}):a.setState({hasMoreItems:!1})})),setTimeout((function(){a.setState({isLoading:!1})}),2e3)},a.handleSubmit=function(e){e.preventDefault();a.setState({isLoading:!0,results:[]}),a.loadItems(null)},a.handleChange=function(e){a.setState({searchQuery:e.target.value})},a.state={searchQuery:"",result:{},results:[],isLoading:!0,nextHref:null,hasMoreItems:!0},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.loadItems(),setTimeout((function(){e.setState({isLoading:!1})}),2e3)}},{key:"render",value:function(){return s.a.createElement("div",{className:"app"},s.a.createElement("header",{className:"header"},s.a.createElement("div",{className:"logoWrapper"},s.a.createElement("div",{className:"logoStar"}),s.a.createElement("p",{className:"logoText"},"CHARACTER ENCYCLOPEDIA"),s.a.createElement("div",{className:"logoWars"}))),s.a.createElement("main",{className:"cardContainer"},this.state.isLoading?s.a.createElement(C,null):s.a.createElement(O,{results:this.state.results,searchQuery:this.state.searchQuery,handleSubmit:this.handleSubmit,handleChange:this.handleChange,fetchDataApp:this.fetchData,loadItems:this.loadItems,hasMore:this.state.hasMoreItems})),s.a.createElement("footer",{className:"footer"},s.a.createElement("div",{className:"footerText"},s.a.createElement("p",{className:"footerText"},"STAR WARS CHARACTER ENCYCLOPEDIA, 2019"))))}}]),t}(n.Component);c.a.render(s.a.createElement(k,null),document.getElementById("root"))}],[[13,1,2]]]);
//# sourceMappingURL=main.2ce02a68.chunk.js.map